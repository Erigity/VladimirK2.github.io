<!DOCTYPE html>
<html>
<head>
<title>IOCTL</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../index.css">
<link href="data:image/x-icon;base64,AAABAAEAEBAAAAAAAABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////ALaKNwDk1YgAlVMAAMKWdgDu4cgA07lmAKRoJgDexqoAxaJOAM6rjQC2gmAA+PPgAOzirgDcyXUAsXxKAJ9jEADcxZQAzq54AK16JwDAl10AvJREAK14OADp3Z4Ay61eAPz58ADWuZwA9O7OAOfWwADdyYQA2L2KAPDmvADhzZ0Au49UAKlwLwDKpm8At4dLANO2gQCaWwgAqHMfAObVpgCjaxcA4dF9AMqkhQDiz68AvpBvAOfalQD28NcA8unFAN3FnwDJqlYA+vbpAMOfVQD9/PcAvJJNAO7kzwDAmkYA7uO0AOrcrwCmay0A49CpAM6yXgDcw6QAwpxcAPPrygD38dwArnwrAPHnwQC4hmAA3ciRAO/kuADl06MA/v36ANzGnADMrWEA8Oi+AN7GoQD9+/UA/PryAPn25wDz68wA9u/XAPDlvADu47MAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE9BGEIAAAAAAAAAAAAANi1HRwMrUQAAAAAAAABJUiAlOjorAisOAAAAAABQICA7CBJGOQQzKxg2AAAAICAgEwgmQAQEPisHL1AANDogUyMkIAoEBD4rFhQZADA6Oh8VIEhDBAQRFCcqBwBEIB8XOzpGOQQEBAQUNQNPRykIFylTVA8qBAQEFCsYDUciCAgyUlI9SyoEBAQrDjEhPBBFLlIsGz83KAQEM0xNRQwuDAwLBQwuCUoWJygcTh0GUlJSUlJSUlJSUR4WOAAAGlJSUlJSUlJSUjAwVDYAAAABNFJSUlJSUlINNDYAAAAAAABJDVJCNE8BAAAAAP4fAAD4DwAA4AcAAMABAADAAAAAgAAAAIAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAA4AEAAPgPAAA=" rel="icon" type="image/x-icon" />
</head>
<body>
<div id="search">
<input type="text" placeholder="Search..." />
</div>
<div id="sidebar">
<h2>jBC Programmers Reference Guide</h2>
<ul><li><a href="preface.html">Preface</a></li>
<li><a href="what_is_tafc.html">What is TAFC</a></li>
<li><a href="tafc_releases.html">TAFC releases</a></li>
<li><a href="what_is_t24.html">What is T24</a></li>
<li><a href="supported_platforms.html">Supported platforms</a></li>
<li><a href="jbc_jbase_features.html">jBC/jBASE features</a></li>
</ul>
<h2>Introduction to some jBC syntax features</h2>
<ul><li><a href="note.html">Note</a></li>
<li><a href="note_2.html">Note 2</a></li>
<li><a href="variables_visibility_and_lifetime.html">Variables visibility and lifetime</a></li>
<li><a href="to_wrap_a_long_line.html">To wrap a long line</a></li>
<li><a href="several_statements_on_the_same_line.html">Several statements on the same line</a></li>
<li><a href="comments.html">Comments</a></li>
<li><a href="string_variables.html">String variables</a></li>
<li><a href="numeric_variables.html">Numeric variables</a></li>
<li><a href="boolean_variables.html">Boolean variables</a></li>
<li><a href="dynamic_arrays.html">Dynamic arrays</a></li>
<li><a href="dimensioned_arrays.html">Dimensioned arrays</a></li>
<li><a href="other_notes.html">Other notes</a></li>
</ul>
<h2>Guidelines for writing the source code</h2>
<ul><li><a href="recommendations_not_rules.html">Recommendations (not rules)</a></li>
</ul>
<h2>Environment variables relevant to jBC programming</h2>
<ul><li><a href="minimum_set_of_variables_necessary_to_start_development.html">Minimum set of variables necessary to start development</a></li>
<li><a href="customize_work_folders_and_files_location.html">Customize work folders and files location</a></li>
<li><a href="runtime_errors_handling.html">Runtime errors handling</a></li>
<li><a href="regional_settings.html">Regional settings</a></li>
<li><a href="diagnostics_and_tracing.html">Diagnostics and tracing</a></li>
<li><a href="other.html">Other</a></li>
</ul>
<h2>Compilation</h2>
<ul><li><a href="introduction_to_basiccatalog_and_jcompile.html">Introduction to BASIC...CATALOG and jcompile</a></li>
</ul>
<h2>Data files</h2>
<ul><li><a href="introduction_to_jbase_tafc_data_files.html">Introduction to jBASE/TAFC data files</a></li>
<li><a href="create_delete_hashed_file.html">Create/delete hashed file</a></li>
<li><a href="create_and_list_the_data.html">Create and list the data</a></li>
<li><a href="adding_dictionary_items.html">Adding dictionary items</a></li>
<li><a href="change_of_size_and_format_statistics_properties.html">Change of size and format, statistics, properties</a></li>
<li><a href="ud_type.html">UD type</a></li>
</ul>
<h2>System ("@") variables</h2>
<ul><li><a href="@am_@fm_@vm_@sm_@tm.html">@AM (@FM), @VM, @SM, @TM</a></li>
<li><a href="@callstack.html">@CALLSTACK</a></li>
<li><a href="@codepage.html">@CODEPAGE</a></li>
<li><a href="@data.html">@DATA</a></li>
<li><a href="@date.html">@DATE</a></li>
<li><a href="@day.html">@DAY</a></li>
<li><a href="@eof.html">@EOF</a></li>
<li><a href="@filename.html">@FILENAME</a></li>
<li><a href="@footerbreak.html">@FOOTER.BREAK</a></li>
<li><a href="@headerbreak.html">@HEADER.BREAK</a></li>
<li><a href="@id.html">@ID</a></li>
<li><a href="@level.html">@LEVEL</a></li>
<li><a href="@locale.html">@LOCALE</a></li>
<li><a href="@lptrhigh.html">@LPTRHIGH</a></li>
<li><a href="@month.html">@MONTH</a></li>
<li><a href="@parasentence.html">@PARASENTENCE</a></li>
<li><a href="@path.html">@PATH</a></li>
<li><a href="@pid.html">@PID</a></li>
<li><a href="@record.html">@RECORD</a></li>
<li><a href="@selected.html">@SELECTED</a></li>
<li><a href="@termtype.html">@TERMTYPE</a></li>
<li><a href="@time.html">@TIME</a></li>
<li><a href="@timezone.html">@TIMEZONE</a></li>
<li><a href="@tty.html">@TTY</a></li>
<li><a href="@uid.html">@UID</a></li>
<li><a href="@userroot_@userthread_and_@userstats.html">@USER.ROOT, @USER.THREAD and @USERSTATS</a></li>
</ul>
<h2>jBC Functions and Statements (@ - E)</h2>
<ul><li><a href="@.html">@</a></li>
<li><a href="@_screencode.html">@ (SCREENCODE)</a></li>
<li><a href="abort.html">ABORT</a></li>
<li><a href="abs.html">ABS</a></li>
<li><a href="abss.html">ABSS</a></li>
<li><a href="adds.html">ADDS</a></li>
<li><a href="alpha.html">ALPHA</a></li>
<li><a href="ands.html">ANDS</a></li>
<li><a href="ascii.html">ASCII</a></li>
<li><a href="assigned.html">ASSIGNED</a></li>
<li><a href="bitand.html">BITAND</a></li>
<li><a href="bitchange.html">BITCHANGE</a></li>
<li><a href="bitcheck.html">BITCHECK</a></li>
<li><a href="bitload.html">BITLOAD</a></li>
<li><a href="bitnot.html">BITNOT</a></li>
<li><a href="bitor.html">BITOR</a></li>
<li><a href="bitreset.html">BITRESET</a></li>
<li><a href="bitset.html">BITSET</a></li>
<li><a href="bittest.html">BITTEST</a></li>
<li><a href="bitxor.html">BITXOR</a></li>
<li><a href="break.html">BREAK</a></li>
<li><a href="break_on_off.html">BREAK ON/OFF</a></li>
<li><a href="bytelen.html">BYTELEN</a></li>
<li><a href="cachebucketlist.html">CacheBucketList</a></li>
<li><a href="cacheclear.html">CacheClear</a></li>
<li><a href="cacheclearall.html">CacheClearAll</a></li>
<li><a href="cacheclearstats.html">CacheClearStats</a></li>
<li><a href="cachedelete.html">CacheDelete</a></li>
<li><a href="cacheexists.html">CacheExists</a></li>
<li><a href="cacheget.html">CacheGet</a></li>
<li><a href="cachegetoption.html">CacheGetOption</a></li>
<li><a href="cachekeylist.html">CacheKeyList</a></li>
<li><a href="cacheput.html">CachePut</a></li>
<li><a href="cachesetoption.html">CacheSetOption</a></li>
<li><a href="cachestats.html">CacheStats</a></li>
<li><a href="call.html">CALL</a></li>
<li><a href="callc.html">CALLC</a></li>
<li><a href="calldotnet.html">CALLdotNET</a></li>
<li><a href="callj.html">CALLJ</a></li>
<li><a href="calljee.html">CALLJEE</a></li>
<li><a href="callonexit.html">CALLONEXIT</a></li>
<li><a href="case.html">CASE</a></li>
<li><a href="catalog_command.html">CATALOG Command</a></li>
<li><a href="cats.html">CATS</a></li>
<li><a href="chain.html">CHAIN</a></li>
<li><a href="change.html">CHANGE</a></li>
<li><a href="changetimestamp.html">CHANGETIMESTAMP</a></li>
<li><a href="char.html">CHAR</a></li>
<li><a href="chars.html">CHARS</a></li>
<li><a href="chdir.html">CHDIR</a></li>
<li><a href="checksum.html">CHECKSUM</a></li>
<li><a href="clear.html">CLEAR</a></li>
<li><a href="clearcommon.html">CLEARCOMMON</a></li>
<li><a href="cleardata.html">CLEARDATA</a></li>
<li><a href="clearfile.html">CLEARFILE</a></li>
<li><a href="clearinput.html">CLEARINPUT</a></li>
<li><a href="clearselect.html">CLEARSELECT</a></li>
<li><a href="close.html">CLOSE</a></li>
<li><a href="closeseq.html">CLOSESEQ</a></li>
<li><a href="col1_and_col2.html">COL1 and COL2</a></li>
<li><a href="collectdata.html">COLLECTDATA</a></li>
<li><a href="common.html">COMMON</a></li>
<li><a href="compare.html">COMPARE</a></li>
<li><a href="continue.html">CONTINUE</a></li>
<li><a href="convert.html">CONVERT</a></li>
<li><a href="convert_statement.html">CONVERT (STATEMENT)</a></li>
<li><a href="cos.html">COS</a></li>
<li><a href="count.html">COUNT</a></li>
<li><a href="counts.html">COUNTS</a></li>
<li><a href="create.html">CREATE</a></li>
<li><a href="crt.html">CRT</a></li>
<li><a href="data.html">DATA</a></li>
<li><a href="date.html">DATE</a></li>
<li><a href="dcount.html">DCOUNT</a></li>
<li><a href="debug.html">DEBUG</a></li>
<li><a href="decatalog_and_deletecatalog_commands.html">DECATALOG and DELETE-CATALOG Commands</a></li>
<li><a href="decrypt.html">DECRYPT</a></li>
<li><a href="defc.html">DEFC</a></li>
<li><a href="defce.html">DEFCE</a></li>
<li><a href="deffun.html">DEFFUN</a></li>
<li><a href="del.html">DEL</a></li>
<li><a href="delete.html">DELETE</a></li>
<li><a href="deletelist.html">DELETELIST</a></li>
<li><a href="deleteseq.html">DELETESEQ</a></li>
<li><a href="deleteu.html">DELETEU</a></li>
<li><a href="dimension.html">DIMENSION</a></li>
<li><a href="dir.html">DIR</a></li>
<li><a href="div.html">DIV</a></li>
<li><a href="divs.html">DIVS</a></li>
<li><a href="downcase.html">DOWNCASE</a></li>
<li><a href="dround.html">DROUND</a></li>
<li><a href="dtx.html">DTX</a></li>
<li><a href="dyntoxml.html">DYNTOXML</a></li>
<li><a href="ebcdic.html">EBCDIC</a></li>
<li><a href="echo.html">ECHO</a></li>
<li><a href="encrypt.html">ENCRYPT</a></li>
<li><a href="enter.html">ENTER</a></li>
<li><a href="eqs.html">EQS</a></li>
<li><a href="equate.html">EQUATE</a></li>
<li><a href="ereplace.html">EREPLACE</a></li>
<li><a href="execute.html">EXECUTE</a></li>
<li><a href="exit.html">EXIT</a></li>
<li><a href="exp.html">EXP</a></li>
<li><a href="extract.html">EXTRACT</a></li>
</ul>
<h2>jBC Functions and Statements (F - J)</h2>
<ul><li><a href="fadd.html">FADD</a></li>
<li><a href="fdiv.html">FDIV</a></li>
<li><a href="field.html">FIELD</a></li>
<li><a href="fields.html">FIELDS</a></li>
<li><a href="fileinfo.html">FILEINFO</a></li>
<li><a href="filelock.html">FILELOCK</a></li>
<li><a href="fileunlock.html">FILEUNLOCK</a></li>
<li><a href="find.html">FIND</a></li>
<li><a href="findstr.html">FINDSTR</a></li>
<li><a href="formlist.html">FORMLIST</a></li>
<li><a href="flush.html">FLUSH</a></li>
<li><a href="fmt.html">FMT</a></li>
<li><a href="fmts.html">FMTS</a></li>
<li><a href="fold.html">FOLD</a></li>
<li><a href="footing.html">FOOTING</a></li>
<li><a href="for.html">FOR</a></li>
<li><a href="fsub.html">FSUB</a></li>
<li><a href="function.html">FUNCTION</a></li>
<li><a href="ges.html">GES</a></li>
<li><a href="get.html">GET</a></li>
<li><a href="getcwd.html">GETCWD</a></li>
<li><a href="getenv.html">GETENV</a></li>
<li><a href="getlist.html">GETLIST</a></li>
<li><a href="getusergroup.html">GETUSERGROUP</a></li>
<li><a href="getx.html">GETX</a></li>
<li><a href="gosub.html">GOSUB</a></li>
<li><a href="goto.html">GOTO</a></li>
<li><a href="group.html">GROUP</a></li>
<li><a href="groupstore.html">GROUPSTORE</a></li>
<li><a href="heading.html">HEADING</a></li>
<li><a href="headinge_and_headingn.html">HEADINGE and HEADINGN</a></li>
<li><a href="hush.html">HUSH</a></li>
<li><a href="iconv.html">ICONV</a></li>
<li><a href="iconvs.html">ICONVS</a></li>
<li><a href="if_statement.html">IF (statement)</a></li>
<li><a href="ifs.html">IFS</a></li>
<li><a href="in.html">IN</a></li>
<li><a href="index.html">INDEX</a></li>
<li><a href="inmat.html">INMAT</a></li>
<li><a href="input.html">INPUT</a></li>
<li><a href="inputclear.html">INPUTCLEAR</a></li>
<li><a href="inputnull.html">INPUTNULL</a></li>
<li><a href="ins.html">INS</a></li>
<li><a href="insert.html">INSERT</a></li>
<li><a href="int.html">INT</a></li>
<li><a href="ioctl.html">IOCTL</a></li>
<li><a href="isalpha.html">ISALPHA</a></li>
<li><a href="isalnum.html">ISALNUM</a></li>
<li><a href="iscntrl.html">ISCNTRL</a></li>
<li><a href="isdigit.html">ISDIGIT</a></li>
<li><a href="islower.html">ISLOWER</a></li>
<li><a href="isprint.html">ISPRINT</a></li>
<li><a href="isspace.html">ISSPACE</a></li>
<li><a href="isupper.html">ISUPPER</a></li>
<li><a href="itype.html">ITYPE</a></li>
<li><a href="jbasecoredump.html">JBASECOREDUMP</a></li>
<li><a href="jbasesubroutineexist.html">JBASESubroutineExist</a></li>
<li><a href="jbasethreadcreate.html">JBASETHREADCreate</a></li>
<li><a href="jbasethreadstatus.html">JBASETHREADStatus</a></li>
<li><a href="jqlcompile.html">JQLCOMPILE</a></li>
<li><a href="jqlexecute.html">JQLEXECUTE</a></li>
<li><a href="jqlfetch.html">JQLFETCH</a></li>
<li><a href="jqlgetproperty.html">JQLGETPROPERTY</a></li>
<li><a href="jqlputproperty.html">JQLPUTPROPERTY</a></li>
<li><a href="sample_program_illustrating_the_usage_of_compiled_jql_statement.html">Sample program illustrating the usage of compiled jQL statement:</a></li>
</ul>
<h2>jBC Functions and Statements (K - O)</h2>
<ul><li><a href="keyin.html">KEYIN</a></li>
<li><a href="latin1.html">LATIN1</a></li>
<li><a href="left.html">LEFT</a></li>
<li><a href="len.html">LEN</a></li>
<li><a href="lendp.html">LENDP</a></li>
<li><a href="lens.html">LENS</a></li>
<li><a href="les.html">LES</a></li>
<li><a href="ln.html">LN</a></li>
<li><a href="localdate.html">LOCALDATE</a></li>
<li><a href="localtime.html">LOCALTIME</a></li>
<li><a href="locate.html">LOCATE</a></li>
<li><a href="lock.html">LOCK</a></li>
<li><a href="logger.html">Logger</a></li>
<li><a href="loop.html">LOOP</a></li>
<li><a href="lower.html">LOWER</a></li>
<li><a href="maketimestamp.html">MAKETIMESTAMP</a></li>
<li><a href="mat.html">MAT</a></li>
<li><a href="matbuild.html">MATBUILD</a></li>
<li><a href="matches.html">MATCHES</a></li>
<li><a href="matchfield.html">MATCHFIELD</a></li>
<li><a href="matparse.html">MATPARSE</a></li>
<li><a href="matread.html">MATREAD</a></li>
<li><a href="matreadu.html">MATREADU</a></li>
<li><a href="matwrite.html">MATWRITE</a></li>
<li><a href="matwriteu.html">MATWRITEU</a></li>
<li><a href="maximum.html">MAXIMUM</a></li>
<li><a href="minimum.html">MINIMUM</a></li>
<li><a href="mod.html">MOD</a></li>
<li><a href="mods.html">MODS</a></li>
<li><a href="msleep.html">MSLEEP</a></li>
<li><a href="muls.html">MULS</a></li>
<li><a href="negs.html">NEGS</a></li>
<li><a href="nes.html">NES</a></li>
<li><a href="next.html">NEXT</a></li>
<li><a href="nobuf.html">NOBUF</a></li>
<li><a href="not.html">NOT</a></li>
<li><a href="nots.html">NOTS</a></li>
<li><a href="null.html">NULL</a></li>
<li><a href="num.html">NUM</a></li>
<li><a href="nums.html">NUMS</a></li>
<li><a href="objexcallback.html">OBJEXCALLBACK</a></li>
<li><a href="oconv.html">OCONV</a></li>
<li><a href="oconvs.html">OCONVS</a></li>
<li><a href="ongoto.html">ONGOTO</a></li>
<li><a href="open.html">OPEN</a></li>
<li><a href="opendev.html">OPENDEV</a></li>
<li><a href="openindex.html">OPENINDEX</a></li>
<li><a href="openpath.html">OPENPATH</a></li>
<li><a href="openseq.html">OPENSEQ</a></li>
<li><a href="openser.html">OPENSER</a></li>
<li><a href="ors.html">ORS</a></li>
<li><a href="osbread.html">OSBREAD</a></li>
<li><a href="osbwrite.html">OSBWRITE</a></li>
<li><a href="osclose.html">OSCLOSE</a></li>
<li><a href="osdelete.html">OSDELETE</a></li>
<li><a href="osopen.html">OSOPEN</a></li>
<li><a href="osread.html">OSREAD</a></li>
<li><a href="oswrite.html">OSWRITE</a></li>
<li><a href="out.html">OUT</a></li>
</ul>
<h2>jBC Functions and Statements (P - T)</h2>
<ul><li><a href="page.html">PAGE</a></li>
<li><a href="pause.html">PAUSE</a></li>
<li><a href="perform.html">PERFORM</a></li>
<li><a href="precision.html">PRECISION</a></li>
<li><a href="print.html">PRINT</a></li>
<li><a href="printer.html">PRINTER</a></li>
<li><a href="printerr.html">PRINTERR</a></li>
<li><a href="procread.html">PROCREAD</a></li>
<li><a href="procwrite.html">PROCWRITE</a></li>
<li><a href="program.html">PROGRAM</a></li>
<li><a href="prompt.html">PROMPT</a></li>
<li><a href="putenv.html">PUTENV</a></li>
<li><a href="pwr.html">PWR</a></li>
<li><a href="quote___dquote___squote.html">QUOTE / DQUOTE / SQUOTE</a></li>
<li><a href="raise.html">RAISE</a></li>
<li><a href="read.html">READ</a></li>
<li><a href="readblk.html">READBLK</a></li>
<li><a href="readl.html">READL</a></li>
<li><a href="readlist.html">READLIST</a></li>
<li><a href="readnext.html">READNEXT</a></li>
<li><a href="readprev.html">READPREV</a></li>
<li><a href="readselect.html">READSELECT</a></li>
<li><a href="readseq.html">READSEQ</a></li>
<li><a href="readt.html">READT</a></li>
<li><a href="readu.html">READU</a></li>
<li><a href="readv.html">READV</a></li>
<li><a href="readvl.html">READVL</a></li>
<li><a href="readvu.html">READVU</a></li>
<li><a href="readxml.html">READXML</a></li>
<li><a href="recordlocked.html">RECORDLOCKED</a></li>
<li><a href="regexp.html">REGEXP</a></li>
<li><a href="release.html">RELEASE</a></li>
<li><a href="remove.html">REMOVE</a></li>
<li><a href="replace.html">REPLACE</a></li>
<li><a href="return.html">RETURN</a></li>
<li><a href="rewind.html">REWIND</a></li>
<li><a href="right.html">RIGHT</a></li>
<li><a href="rnd.html">RND</a></li>
<li><a href="rqm.html">RQM</a></li>
<li><a href="rtndata.html">RTNDATA</a></li>
<li><a href="sadd.html">SADD</a></li>
<li><a href="sdiv.html">SDIV</a></li>
<li><a href="seek.html">SEEK</a></li>
<li><a href="select.html">SELECT</a></li>
<li><a href="send.html">SEND</a></li>
<li><a href="sendx.html">SENDX</a></li>
<li><a href="sentence.html">SENTENCE</a></li>
<li><a href="seq.html">SEQ</a></li>
<li><a href="seqs.html">SEQS</a></li>
<li><a href="sin.html">SIN</a></li>
<li><a href="sleep.html">SLEEP</a></li>
<li><a href="smul.html">SMUL</a></li>
<li><a href="sort.html">SORT</a></li>
<li><a href="soundex.html">SOUNDEX</a></li>
<li><a href="space.html">SPACE</a></li>
<li><a href="spaces.html">SPACES</a></li>
<li><a href="splice.html">SPLICE</a></li>
<li><a href="spooler.html">SPOOLER</a></li>
<li><a href="sqrt.html">SQRT</a></li>
<li><a href="sselect.html">SSELECT</a></li>
<li><a href="sselectn.html">SSELECTN</a></li>
<li><a href="sselectv.html">SSELECTV</a></li>
<li><a href="ssub.html">SSUB</a></li>
<li><a href="status.html">STATUS</a></li>
<li><a href="status_statement.html">STATUS statement</a></li>
<li><a href="stop.html">STOP</a></li>
<li><a href="str.html">STR</a></li>
<li><a href="strs.html">STRS</a></li>
<li><a href="subroutine.html">SUBROUTINE</a></li>
<li><a href="subs.html">SUBS</a></li>
<li><a href="substrings.html">SUBSTRINGS</a></li>
<li><a href="sum.html">SUM</a></li>
<li><a href="swap.html">SWAP</a></li>
<li><a href="system_functions.html">System Functions</a></li>
<li><a href="tan.html">TAN</a></li>
<li><a href="time.html">TIME</a></li>
<li><a href="timedate.html">TIMEDATE</a></li>
<li><a href="timediff.html">TIMEDIFF</a></li>
<li><a href="timeout.html">TIMEOUT</a></li>
<li><a href="timestamp.html">TIMESTAMP</a></li>
<li><a href="trans.html">TRANS</a></li>
<li><a href="transabort.html">TRANSABORT</a></li>
<li><a href="transend.html">TRANSEND</a></li>
<li><a href="transquery.html">TRANSQUERY</a></li>
<li><a href="transtart.html">TRANSTART</a></li>
<li><a href="trim.html">TRIM</a></li>
<li><a href="trimb.html">TRIMB</a></li>
<li><a href="trimbs.html">TRIMBS</a></li>
<li><a href="trimf.html">TRIMF</a></li>
<li><a href="trimfs.html">TRIMFS</a></li>
</ul>
<h2>jBC Functions and Statements (U - X)</h2>
<ul><li><a href="unassigned.html">UNASSIGNED</a></li>
<li><a href="uniquekey.html">UNIQUEKEY</a></li>
<li><a href="unlock.html">UNLOCK</a></li>
<li><a href="udtexecute.html">UDTEXECUTE</a></li>
<li><a href="upcase.html">UPCASE</a></li>
<li><a href="utf8.html">UTF8</a></li>
<li><a href="wake.html">WAKE</a></li>
<li><a href="weof.html">WEOF</a></li>
<li><a href="weofseq.html">WEOFSEQ</a></li>
<li><a href="write.html">WRITE</a></li>
<li><a href="writeblk.html">WRITEBLK</a></li>
<li><a href="writelist.html">WRITELIST</a></li>
<li><a href="writeseq.html">WRITESEQ</a></li>
<li><a href="writeseqf.html">WRITESEQF</a></li>
<li><a href="writet.html">WRITET</a></li>
<li><a href="writeu.html">WRITEU</a></li>
<li><a href="writev.html">WRITEV</a></li>
<li><a href="writevu.html">WRITEVU</a></li>
<li><a href="writexml.html">WRITEXML</a></li>
<li><a href="xlate.html">XLATE</a></li>
<li><a href="xmltodyn.html">XMLTODYN</a></li>
<li><a href="xmltoxml.html">XMLTOXML</a></li>
<li><a href="xtd.html">XTD</a></li>
</ul>
<h2>Embedded SQL for jBC</h2>
<ul><li><a href="introduction_to_embedded_sql.html">Introduction to embedded SQL</a></li>
<li><a href="embedded_sql_compiler_option.html">EMBEDDED SQL COMPILER OPTION</a></li>
<li><a href="troubleshooting.html">TROUBLESHOOTING</a></li>
</ul>
</div>
<div id="scrollable">
<div id="content"><h1>IOCTL</h1>
<p><a name="IOCTL"/>
</p>
<p>The jBC language provides an intrinsic function called IOCTL that
 behaves in a similar manner to the C function ioctl(). Its purpose
 is to allow commands to be sent to the database driver for a
 particular file, and then to receive a reply from the database
 driver.
</p>
<p>As with the C function ioctl, the use of IOCTL is highly dependent
 upon the database driver it is talking to. Each database driver may
 choose to provide certain common functionality, or may add its own
 commands and so on. This is especially true of user-written database
 drivers.
</p>
<p>First, an example of a source program that opens a file and finds
 the type of file:
</p>
<pre><span>    <span class="c-1com">INCLUDE</span> JBC.h
</span><span>    <span class="c-1com">OPEN</span> <span class="c-4str">"MD"</span> <span class="c-1com">TO</span> DSCB <span class="c-1com">ELSE</span> <span class="c-1com">STOP</span> <span class="c-2num">201</span>, <span class="c-4str">"MD"</span>
</span><span>    status = <span class="c-4str">""</span>
</span><span>    <span class="c-1com">IF</span> <span class="c-0fun">IOCTL</span>(DSCB, JIOCTL_COMMAND_FILESTATUS, status) <span class="c-1com">THEN</span>
</span><span>       <span class="c-1com">PRINT</span> <span class="c-4str">"Type of file = "</span> : <span class="c-0fun">DQUOTE</span>(status&lt;<span class="c-2num">1</span>&gt)
</span><span>    <span class="c-1com">END</span> <span class="c-1com">ELSE</span>
</span><span>       <span class="c-1com">PRINT</span> <span class="c-4str">"IOCTL FAILED !! unknown file type"</span>
</span><span>    <span class="c-1com">END</span>
</span></pre>
<p>If the ELSE clause is taken, it does not necessarily mean there is
 an error, it only means that the database driver for file "MD"
 does not support the command that was requested from it. The file
 JBC.h is supplied with jBASE in the directory TAFC_HOME sub
 directory include. If the source is compiled with the jbc or BASIC
 command, this directory is automatically included in the search path
 and no special action is needed by the programmer for the "INCLUDE
 JBC.h" statement.
</p>
<p>The format of the IOCTL function is:
</p>
<pre><span>    <span class="c-0fun">IOCTL</span>(Filevar, Command, Parameter)
</span></pre>
<p>Where:
</p>
<p><strong>filevar</strong> Is a variable that has had a file opened against it
 using the OPEN statement. However, if you want to use the default
 file variable, use -1 in this position.
</p>
<p>For example:
</p>
<pre><span>    <span class="c-1com">OPEN</span> <span class="c-4str">"MD"</span> <span class="c-1com">ELSE</span> <span class="c-1com">STOP</span>
</span><span>    filevar = <span class="c-2num">-1</span>
</span><span>    <span class="c-1com">IF</span> <span class="c-0fun">IOCTL</span>(filevar, JIOCTL_COMMAND_xxx, status)
</span><span>    ...
</span></pre>
<p><strong>command</strong> can be any numeric value (or variable containing a
 numeric). However, it is up to the database driver to support that
 particular command number. The remainder of this chapter describes
 the common IOCTL command numbers supported by the jBASE database
 drivers provided.
</p>
<p>Status Pass here a jBC variable. The use of this variable depends
 upon the command parameter, and will be described later for each
 command supported.
</p>
<p>The return value is 0 for failure, or 1 for success. A value of
 "-1" generally shows the command has not been recognized.
</p>
<p>The remainder of this section will deal with the IOCTL commands
 that are supported by the provided jBASE database drivers, and the
 JBC_COMMAND_GETFILENAME command that is supported for all database
 drivers.
</p>
<p><em>JBC_COMMAND_GETFILENAME COMMAND</em>
 Using this command to the IOCTL function, you can determine the exact
 file name that was used to open the file. This is helpful because
 jEDI uses Q pointers, F pointers and the JEDIFILEPATH environment
 variable to actually open the file, and the application can never be
 totally sure where the resultant file was really opened. Normally of
 course, this is of no concern to the application.
</p>
<h2>EXAMPLE</h2>
<p>Open the file CUSTOMERS and find out the exact path that was used to
 open the file.
</p>
<pre><span>    <span class="c-1com">INCLUDE</span> JBC.h
</span><span>    <span class="c-1com">OPEN</span> <span class="c-4str">"CUSTOMERS"</span> <span class="c-1com">TO</span> DSCB <span class="c-1com">ELSE</span> <span class="c-1com">STOP</span> <span class="c-2num">201</span>, <span class="c-4str">"CUSTOMERS"</span>
</span><span>    filename = <span class="c-4str">""</span>
</span><span>    <span class="c-1com">IF</span> <span class="c-0fun">IOCTL</span>(DSCB, JBC_COMMAND_GETFILENAME, filename) <span class="c-1com">ELSE</span>
</span><span>       <span class="c-1com">CRT</span> <span class="c-4str">"IOCTL failed !!"</span> ; <span class="c-0fun">EXIT</span>(<span class="c-2num">2</span>)
</span><span>    <span class="c-1com">END</span>
</span><span>    <span class="c-1com">PRINT</span> <span class="c-4str">"Full file path = "</span> : <span class="c-0fun">DQUOTE</span>(filename)
</span></pre>
<p>This command is executed by the jBC library code rather than the jEDI
 library code or the database drivers, so it can be run against a file
 descriptor for any file type.
</p>
<p><em>JIOCTL_COMMAND_CONVERT COMMAND</em>
</p>
<p>Some of the jBC database drivers will perform an automatic conversion
 of the input and output record when performing reads and writes.
</p>
<p>An example of this is when writing to a directory. In this case, the
 attribute marks will be converted to new-line characters and a
 trailing new-line character added. Similarly for reading from a
 directory the new-line characters will be replaced with attribute
 marks, and the trailing new-line character will be deleted.
</p>
<p>The above example is what happens for the database driver for
 directories. It assumes by default that the record being read or
 written is a text file and that the conversion is necessary. It tries
 to apply some intelligence to reading files, as text files always have
 a trailing new-line character. Therefore, if a file is read without a
 trailing new-line character, the database driver assumes the file must
 be a binary file rather than a text file, and no conversion takes
 place.
</p>
<p>This conversion of data works in most cases and usually requires no
 special intervention from the programmer.
</p>
<p>There are cases however, when this conversion needs to be controlled
 and interrogated, and the IOCTL function call with the
 JIOCTL_COMMAND_CONVERT command provides the jBASE database drivers
 that support this conversion with commands to control it.
</p>
<p>The call to IOCTL, if successful, will only affect file operations
 that use the same file descriptor. Consider the following code:
</p>
<pre><span>    <span class="c-1com">INCLUDE</span> JBC.h
</span><span>    <span class="c-1com">OPEN</span> <span class="c-4str">"MD"</span> <span class="c-1com">TO</span> FILEVAR1 <span class="c-1com">ELSE</span> ...
</span><span>    <span class="c-1com">OPEN</span> <span class="c-4str">"MD"</span> <span class="c-1com">TO</span> FILEVAR2 <span class="c-1com">ELSE</span> ...
</span><span>    <span class="c-1com">IF</span> <span class="c-0fun">IOCTL</span>(FILEVAR1, JIOCTL_COMMAND_CONVERT, <span class="c-4str">'RB'</span>)
</span></pre>
<p>In the above example, any future file operations using variable
 FILEVAR1 will be controlled by the change forced in the IOCTL
 request. Any file operations using variable FILEVAR2 will not be
 affected and will use the default file operation.
</p>
<p>Input to the IOCTL is a string of controls delimited by a comma
 that tell the database driver what to do. The output from the IOCTL
 can optionally be a string to show the last conversion that the
 driver performed on the file.
</p>
<p>The descriptions of the available controls that can be passed as
 input to this IOCTL function are:
</p>
<table><tr><th>Code</th><th>Description</th></tr><tr><td>RB</td><td>All future reads to be in binary (no conversion)</td></tr><tr><td>RT</td><td>All future reads to be in text format (always do a</td></tr><tr><td></td><td>conversion)</td></tr><tr><td>RS</td><td>Return to caller the status of the last read("B" = binary,</td></tr><tr><td></td><td>"T" = text)</td></tr><tr><td>WB</td><td>All future writes to be in binary (no conversion)</td></tr><tr><td>WT</td><td>All future writes to be in text format (always do a</td></tr><tr><td></td><td>conversion)</td></tr><tr><td>WI</td><td>All future writes to decide themselves whether binary or text</td></tr><tr><td>WS</td><td>Return to caller the status of the last write ("B" = binary,</td></tr><tr><td></td><td>"T" = text )</td></tr><tr><td>KB</td><td>All future reads/writes have the record key unaltered</td></tr><tr><td>KT</td><td>All future reads/writes have the record key modified</td></tr><tr><td>KI</td><td>All future reads/writes to decide if to do a conversion</td></tr><tr><td>KS</td><td>Return to caller the status of the last record key</td></tr><tr><td></td><td>("B" = binary, "T" = text )</td></tr></table>
<h2>EXAMPLE 1</h2>
<p>The application wants to open a file, and to ensure that all reads and writes to that file are in binary, and that no translation such as new-lines to attribute marks is performed.
</p>
<pre><span>    <span class="c-1com">INCLUDE</span> JBC.h
</span><span>    <span class="c-1com">OPEN</span> <span class="c-4str">"FILE"</span> <span class="c-1com">TO</span> DSCB <span class="c-1com">ELSE</span> <span class="c-1com">STOP</span> <span class="c-2num">201</span>, <span class="c-4str">"FILE"</span>
</span><span>    <span class="c-1com">IF</span> <span class="c-0fun">IOCTL</span>(DSCB,JIOCTL_COMMAND_CONVERT, <span class="c-4str">'RB,WB'</span>) <span class="c-1com">ELSE</span>
</span><span>       <span class="c-1com">CRT</span> <span class="c-4str">"UNABLE TO IOCTL FILE <span class="c-4str">'FILE'</span>"</span> ; <span class="c-0fun">EXIT</span>(<span class="c-2num">2</span>)
</span><span>    <span class="c-1com">END</span>
</span></pre>
<h2>EXAMPLE 2</h2>
<p>Read a record from a file, and find out if the last record read was in text format (were new-lines converted to attribute marks and the trailing new-line deleted), or in binary format (with no conversion at all).
</p>
<pre><span>    <span class="c-1com">INCLUDE</span> JBC.h
</span><span>    <span class="c-1com">OPEN</span> <span class="c-4str">"."</span> <span class="c-1com">TO</span> DSCB <span class="c-1com">ELSE</span> <span class="c-1com">STOP</span> <span class="c-2num">201</span>, <span class="c-4str">"."</span>
</span><span>    <span class="c-1com">READ</span> rec <span class="c-1com">FROM</span> DSCB, <span class="c-4str">"prog.o"</span> <span class="c-1com">ELSE</span> <span class="c-1com">STOP</span> <span class="c-2num">202</span>, <span class="c-4str">"prog.o"</span>
</span><span>    status = <span class="c-4str">"RS"</span>
</span><span>    <span class="c-1com">IF</span> <span class="c-0fun">IOCTL</span>(DSCB, JIOCTL_COMMAND_CONVERT, status) <span class="c-1com">THEN</span>
</span><span>       <span class="c-1com">IF</span> status <span class="c-1com">EQ</span> <span class="c-4str">"T"</span> <span class="c-1com">THEN</span> <span class="c-1com">CRT</span> <span class="c-4str">"TEXT"</span> <span class="c-1com">ELSE</span> <span class="c-1com">CRT</span> <span class="c-4str">"BINARY"</span>
</span><span>    <span class="c-1com">END</span> <span class="c-1com">ELSE</span>
</span><span>       <span class="c-1com">CRT</span> <span class="c-4str">"The IOCTL failed !!"</span>
</span><span>    <span class="c-1com">END</span>
</span></pre>
<p><a name="JIOCTL_COMMAND_FILESTATUS"/>
</p>
<p><em>JIOCTL_COMMAND_FILESTATUS COMMAND</em>
</p>
<p>The JIOCTL_COMMAND_FILESTATUS command will return an attribute delimited list of the status of the file to the caller.
</p>
<table><tr><th>Attribute</th><th>Description</th></tr><tr><td><1></td><td>File type, as a string</td></tr><tr><td><2></td><td>File type, as a string</td></tr><tr><td><2></td><td>FileFlags, as decimal number, show LOG, BACKUP and TRANS</td></tr><tr><td><3></td><td>BucketQty, as decimal number, number of buckets in the file</td></tr><tr><td><4></td><td>BucketSize, as decimal number, size of each bucket in bytes</td></tr><tr><td><5></td><td>SecSize, as decimal number, size of secondary data space</td></tr><tr><td><6></td><td>Restore Spec, a string showing any restore re-size</td></tr><tr><td></td><td>specification</td></tr><tr><td><7></td><td>Locking identifiers, separated by multi-values</td></tr><tr><td><8></td><td>FileFlags showing LOG, BACKUP and TRANSACTION permissions</td></tr><tr><td><8,1></td><td>Set to non-zero to suppress logging on this file</td></tr><tr><td><8,2></td><td>Set to non-zero to suppress transaction boundaries on this</td></tr><tr><td></td><td>file</td></tr><tr><td><8,3></td><td>Set to no-zero to suppress backup of the file using jbackup</td></tr><tr><td><9></td><td>Hashing algorithm used</td></tr></table>
<h2>EXAMPLE 1</h2>
<p>Open a file and see if the file type is a directory.
</p>
<pre><span>    <span class="c-1com">INCLUDE</span> JBC.h
</span><span>    <span class="c-1com">OPEN</span> <span class="c-4str">".."</span> <span class="c-1com">TO</span> DSCB <span class="c-1com">ELSE</span> <span class="c-1com">STOP</span> <span class="c-2num">201</span>, <span class="c-4str">".."</span>
</span><span>    status = <span class="c-4str">""</span>
</span><span>    <span class="c-1com">IF</span> <span class="c-0fun">IOCTL</span>(DSCB, JIOCTL_COMMAND_FILESTATUS, status) <span class="c-1com">ELSE</span>
</span><span>       <span class="c-1com">CRT</span> <span class="c-4str">"IOCTL failed !!"</span> ; <span class="c-0fun">EXIT</span>(<span class="c-2num">2</span>)
</span><span>    <span class="c-1com">END</span>
</span><span>    <span class="c-1com">IF</span> status&lt;<span class="c-2num">1</span>&gt <span class="c-1com">EQ</span> <span class="c-4str">"UD"</span> <span class="c-1com">THEN</span>
</span><span>       <span class="c-1com">PRINT</span> <span class="c-4str">"File is a directory"</span>
</span><span>    <span class="c-1com">END</span> <span class="c-1com">ELSE</span>
</span><span>       <span class="c-1com">PRINT</span> <span class="c-4str">"File type is "</span> : <span class="c-0fun">DQUOTE</span>(status&lt;<span class="c-2num">1</span>&gt)
</span><span>       <span class="c-1com">PRINT</span> <span class="c-4str">"This is not expected for .."</span>
</span><span>    <span class="c-1com">END</span>
</span></pre>
<h2>EXAMPLE 2</h2>
<p>Open a file ready to perform file operations in a transaction against
 it. Make sure the file has not been removed as a transaction type
 file by a previous invocation of the command "jchmod -T CUSTOMERS".
</p>
<pre><span>    <span class="c-1com">INCLUDE</span> JBC.h
</span><span>    <span class="c-1com">OPEN</span> <span class="c-4str">"CUSTOMERS"</span> <span class="c-1com">TO</span> DSCB <span class="c-1com">ELSE</span> <span class="c-1com">STOP</span> <span class="c-2num">201</span>, <span class="c-4str">"CUSTOMERS"</span>
</span><span>    <span class="c-1com">IF</span> <span class="c-0fun">IOCTL</span>(DSCB, JIOCTL_COMMAND_FILESTATUS, status) <span class="c-1com">ELSE</span>
</span><span>       <span class="c-1com">CRT</span> <span class="c-4str">"IOCTL failed !!"</span> ; <span class="c-0fun">EXIT</span>(<span class="c-2num">2</span>)
</span><span>    <span class="c-1com">END</span>
</span><span>    <span class="c-1com">IF</span> status&lt;<span class="c-2num">8</span>,<span class="c-2num">2</span>&gt <span class="c-1com">THEN</span>
</span><span>       <span class="c-1com">CRT</span> <span class="c-4str">"Error ! File CUSTOMERS is not"</span>
</span><span>       <span class="c-1com">CRT</span> <span class="c-4str">"part of transaction boundaries !!"</span>
</span><span>       <span class="c-1com">CRT</span> <span class="c-4str">'Use "jchmod +T CUSTOMERS" !!'</span>
</span><span>       <span class="c-0fun">EXIT</span>(<span class="c-2num">2</span>)
</span><span>    <span class="c-1com">END</span>
</span></pre>
<p><em>JIOCTL_COMMAND_FINDRECORD COMMAND</em>
</p>
<p>This command will find out if a record exists on a file without the
 need to actually read in the record. This can provide large performance
 gains in certain circumstances.
</p>
<h2>EXAMPLE</h2>
<p>Before writing out a control record, make sure it doesn't already exist.
 As the control record is quite large, it will provide performance gains
 to simply test if the output record already exists, rather than reading
 it in using the READ statement to see if it exists.
</p>
<pre><span>    <span class="c-1com">INCLUDE</span> JBC.h
</span><span>    <span class="c-1com">OPEN</span> <span class="c-4str">"outputfile"</span> <span class="c-1com">TO</span> DSCB <span class="c-1com">ELSE</span> <span class="c-1com">STOP</span> <span class="c-2num">201</span>, <span class="c-4str">"outputfile"</span>
</span><span>    <span class="c-5com">* Make up the output record to write out in <span class="c-4str">"output"</span></span>
</span><span>    key = <span class="c-4str">"output.out"</span>
</span><span>    rc = <span class="c-0fun">IOCTL</span>(DSCB, JIOCTL_COMMAND_FINDRECORD, key)
</span><span>    <span class="c-1com">BEGIN</span> <span class="c-1com">CASE</span>
</span><span>       <span class="c-1com">CASE</span> rc <span class="c-1com">EQ</span> <span class="c-2num">0</span>
</span><span>          <span class="c-1com">WRITE</span> output <span class="c-1com">ON</span> DSCB,key
</span><span>          <span class="c-1com">CRT</span> <span class="c-4str">"Data written to key "</span> : key
</span><span>       <span class="c-1com">CASE</span> rc <span class="c-1com">GT</span> <span class="c-2num">0</span>
</span><span>          <span class="c-1com">CRT</span> <span class="c-4str">"No further action, record already exists"</span>
</span><span>       <span class="c-1com">CASE</span> <span class="c-2num">1</span>
</span><span>          <span class="c-1com">CRT</span> <span class="c-4str">"IOCTL not supported for file type"</span>
</span><span>    <span class="c-1com">END</span> <span class="c-1com">CASE</span>
</span></pre>
<p><strong>JIOCTL_COMMAND_FINDRECORD_EXTENDED COMMAND</strong>
</p>
<p>This command to the IOCTL function returns the record size and the time
 and date the record was last updated. If the record does not exist,
 null is returned. The time/date stamp is returned in UTC format.
</p>
<h2>EXAMPLE</h2>
<p>Print the time and data of last update for each record in filename.
</p>
<pre><span>    <span class="c-1com">INCLUDE</span> JBC.h
</span><span>    <span class="c-1com">OPEN</span> <span class="c-4str">"filename"</span> <span class="c-1com">TO</span> DSCB <span class="c-1com">ELSE</span> <span class="c-1com">STOP</span> <span class="c-2num">201</span>, <span class="c-4str">"filename"</span>
</span><span>    <span class="c-5com">*</span>
</span><span>    <span class="c-5com">* Select each record in the newly opened file</span>
</span><span>    <span class="c-5com">*</span>
</span><span>    <span class="c-1com">SELECT</span> DSCB
</span><span>    <span class="c-1com">LOOP</span> <span class="c-1com">WHILE</span> <span class="c-1com">READNEXT</span> record.key <span class="c-1com">DO</span>
</span><span>    <span class="c-5com">*</span>
</span><span>    <span class="c-5com">* Get the details on the record and look for errors.</span>
</span><span>    <span class="c-5com">*</span>
</span><span>       record.info = record.key
</span><span>       <span class="c-1com">IF</span> <span class="c-0fun">IOCTL</span>(DSCB, JIOCTL_COMMAND_FINDRECORD_EXTENDED, record.info) <span class="c-1com">ELSE</span>
</span><span>          <span class="c-1com">CRT</span> <span class="c-4str">"Error! File driver does not support this"</span>
</span><span>          <span class="c-1com">STOP</span>
</span><span>       <span class="c-1com">END</span>
</span><span>    <span class="c-5com">*</span>
</span><span>    <span class="c-5com">* Extract and convert the returned data</span>
</span><span>    <span class="c-5com">*</span>
</span><span>       record.size = record.info&lt;<span class="c-2num">1</span>&gt
</span><span>       record.utc = record.info&lt;<span class="c-2num">2</span>&gt
</span><span>       record.time = <span class="c-0fun">OCONV</span>(record.utc, <span class="c-4str">'U0ff0'</span>)
</span><span>       record.date = <span class="c-0fun">OCONV</span>(record.utc, <span class="c-4str">'U0ff1'</span>)
</span><span>    <span class="c-5com">*</span>
</span><span>    <span class="c-5com">* Print the information.</span>
</span><span>    <span class="c-5com">*</span>
</span><span>       <span class="c-1com">PRINT</span> <span class="c-4str">"Record key "</span> :record.key: <span class="c-4str">" last updated at "</span> :
</span><span>       <span class="c-1com">PRINT</span> <span class="c-0fun">OCONV</span>(record.time, <span class="c-4str">'MTS'</span>): <span class="c-4str">" "</span> :
</span><span>       <span class="c-1com">PRINT</span> <span class="c-0fun">OCONV</span>(record.date, <span class="c-4str">'D4'</span>)
</span><span>    <span class="c-1com">REPEAT</span>
</span></pre>
<p><strong>JIOCTL_COMMAND_HASH_RECORD COMMAND</strong>
</p>
<p>For jBASE hashed files such as j3 and j4 each record is pseudo-randomly
 written to one of the buckets (or groups) of the hashed file. The actual
 bucket it is written to depends upon two factors:
</p>
<p>The actual record key (or item-id)
</p>
<p>The number of buckets in the file (or modulo)
</p>
<p>This IOCTL command shows which bucket number the record would be found
 in, given the input record key. The bucket number is in the range 0 to
 (b-1) where b is the number of buckets in the file specified when the
 file was created (probably using CREATE-FILE).
</p>
<p>The command only returns the expected bucket number, as is no indication
 that the record actually exists in the file.
</p>
<p>Two attributes are returned by this command. The first is the hash
 value that the record key has hashed to, and the second attribute is
 the bucket number.
</p>
<h2>EXAMPLE</h2>
<p>Open a file, and find out what bucket number the record "PIPE&SLIPPER"
 would be found in.
</p>
<pre><span>    <span class="c-1com">INCLUDE</span> JBC.h
</span><span>    <span class="c-1com">OPEN</span> <span class="c-4str">"WEDDING-PRESENTS"</span> <span class="c-1com">TO</span> DSCB <span class="c-1com">ELSE</span> <span class="c-1com">STOP</span>
</span><span>    key = <span class="c-4str">"PIPE&SLIPPER"</span>
</span><span>    parm = key
</span><span>    <span class="c-1com">IF</span> <span class="c-0fun">IOCTL</span>(DSCB, JIOCTL_COMMAND_HASH_RECORD, parm) <span class="c-1com">THEN</span>
</span><span>      <span class="c-1com">PRINT</span> <span class="c-4str">"key "</span> :key: <span class="c-4str">" would be in bucket "</span> :parm&lt;<span class="c-2num">2</span>&gt
</span><span>    <span class="c-1com">END</span> <span class="c-1com">ELSE</span>
</span><span>       <span class="c-1com">CRT</span> <span class="c-4str">"IOCTL failed, command not supported"</span>
</span><span>    <span class="c-1com">END</span>
</span></pre>
<p><strong>JIOCTL_COMMAND_HASH_LOCK COMMAND</strong>
</p>
<p>The jEDI locking mechanism for records in jEDI provided database
 drivers is not strictly a 100% record locking mechanism. Instead, it
 uses the hashed value of the record key to give a value from 0 to
 230-1 to describe the record key. The IOCTL command can be used to
 determine how a record key would be converted into a hashed value for
 use by the locking mechanism.
</p>
<h2>EXAMPLE</h2>
<p>Lock a record in a file and find out what the lock id of the record
 key is. The example then calls the jRLA locking demon and the display
 of locks taken should include the lock taken by this program.
</p>
<pre><span>    <span class="c-1com">INCLUDE</span> JBC.h
</span><span>    <span class="c-1com">DEFC</span> getpid()
</span><span>    <span class="c-1com">OPEN</span> <span class="c-4str">"WEDDING-PRESENTS"</span> <span class="c-1com">TO</span> DSCB <span class="c-1com">ELSE</span> <span class="c-1com">STOP</span>
</span><span>    key = <span class="c-4str">"PIPE&SLIPPER"</span>
</span><span>    parm = key
</span><span>    <span class="c-1com">IF</span> <span class="c-0fun">IOCTL</span>(DSCB, JIOCTL_COMMAND_HASH_LOCK, parm) <span class="c-1com">ELSE</span>
</span><span>       <span class="c-1com">CRT</span> <span class="c-4str">"IOCTL failed, command not supported"</span>
</span><span>       <span class="c-0fun">EXIT</span>(<span class="c-2num">2</span>)
</span><span>    <span class="c-1com">END</span>
</span><span>    <span class="c-1com">PRINT</span> <span class="c-4str">"The lock ID for the key is "</span> : parm
</span><span>    <span class="c-1com">PRINT</span> <span class="c-4str">"Our process id is "</span> : getpid()
</span></pre><div id="timestamp">Last update: Sat, 16 Jul 2022 19:16 UTC+5</div></div>
</div>
<script type="text/javascript">

var js = {
store: (function(){
if (sessionStorage) {
return function(){
if (arguments[0] !== undefined && arguments[1] !== undefined) {
if (arguments[1] == null) {
sessionStorage.removeItem(arguments[0]);return true;
} else {
sessionStorage[arguments[0]] = arguments[1];
return true;
}
} else if (arguments[0]) {
return sessionStorage[arguments[0]];
}
};
} else {
return function(){
if (arguments[0] !== undefined && arguments[1] !== undefined) {
if (arguments[1] == null) {
document.cookie = arguments[0] + "=" + encodeURIComponent(null) + new Date(0).toGMTString();
return true;
} else {
document.cookie = arguments[0] + "=" + encodeURIComponent(arguments[1]);
return true;
}
} else if (arguments[0]) {
var regexp  = new RegExp("(?:; )?" + arguments[0] + "=([^;]*);?");
if (regexp.test(document.cookie)) {
    return decodeURIComponent(regexp["$1"]);
}
return false;
}
}
}})(),
search: {
links: [],
headers: [],
init: function(){
var sidebar = document.getElementById("sidebar");
sidebar.scrollTop = js.store("scroll") ? js.store("scroll") : 0;
sidebar.addEventListener("scroll", function(){
js.store("scroll", this.scrollTop);
}, false)
sidebar.scrollTop = js.store("scroll") ? js.store("scroll") : 0;
this.links = sidebar.getElementsByTagName("a");
var h1 = document.getElementById("scrollable").getElementsByTagName("h1")[0].innerHTML;
this.headers = sidebar.getElementsByTagName("h2");
for (var a = js.search.links.length; a--;) {
if (js.search.links[a].innerHTML == h1) {
js.search.links[a].parentNode.className = "current";
}
}
var search_input = document.getElementById("search").getElementsByTagName("input")[0];
search_input.onkeyup = function(){
for (var a = js.search.links.length; a--;) {
if (this.value == "") {
js.store("search", null);
for (var h = js.search.headers.length; h--;) {
js.search.headers[h].style.display = "block";
}
} else {
js.store("search", this.value);
for (var h = js.search.headers.length; h--;) {
js.search.headers[h].style.display = "none";
}
}
if (js.search.links[a].innerHTML.toLowerCase().indexOf(this.value.toLowerCase()) != -1 || this.value == "") {
js.search.links[a].parentNode.style.display = "list-item";
} else {
js.search.links[a].parentNode.style.display = "none";
}
}
};
if (js.store("search")) {
search_input.value = js.store("search");
search_input.onkeyup.apply(search_input);
}
}
}
};
js.search.init();
</script>
</body>
</html>